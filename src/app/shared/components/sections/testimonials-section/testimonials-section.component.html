<section id="testimonials" class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 animate-fade-in hover:shadow-lg transition-all transform hover:translate-y-[-5px]" style="animation-delay: 0.1s">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Client Testimonials</h2>
    <button (click)="openTestimonialModal()" class="text-primary dark:text-secondary hover:underline flex items-center">
      View All
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
  
  <div class="relative">
    <!-- Testimonial Slider -->
    <div class="overflow-hidden">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Testimonials from the data -->
        @for (testimonial of featuredTestimonials; track testimonial.id) {
          <div class="border border-gray-200 dark:border-gray-700  bg-gray-50 dark:bg-gray-700 p-6 rounded-lg shadow-sm transition-all duration-300 group  hover:border-primary dark:hover:border-secondary transform hover:scale-102 hover:shadow-soft-lg">
            <div class="flex items-center mb-4">
                <div class="h-12 w-12 rounded-full overflow-hidden mr-4 flex items-center justify-center bg-white dark:bg-gray-800">
                    <ng-container *ngIf="testimonial.image && testimonial.image.trim().length > 0; else defaultIcon">
                        <img
                                [ngSrc]="testimonial.image"
                                width="48"
                                height="48"
                                [alt]="testimonial.name"
                                class="h-full w-full object-cover"
                                (error)="testimonial.image = 'assets/icons/default.svg'"
                        />
                    </ng-container>

                    <ng-template #defaultIcon>
                        <i class="fa-regular fa-circle-user text-gray-400 text-2xl"></i>
                    </ng-template>
                </div>
              <div>
                <h4 class="font-semibold text-gray-800 dark:text-white">{{testimonial.name}}</h4>
                <p class="text-gray-600 dark:text-gray-400 text-sm">{{testimonial.company}}</p>
              </div>
            </div>
            <div class="mb-4">
              <div class="flex text-yellow-400">
                @for (star of [1, 2, 3, 4, 5]; track star) {
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" [class.text-yellow-400]="star <= testimonial.rating" [class.text-gray-300]="star > testimonial.rating" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                  </svg>
                }
              </div>
            </div>
            <p class="text-gray-600 dark:text-gray-300 italic">"{{testimonial.text}}"</p>
          </div>
        }
      </div>
    </div>
   
    <!-- Quote decoration -->
    <div class="absolute -bottom-4 -right-4 text-primary/10 dark:text-secondary/10">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24" fill="currentColor" viewBox="0 0 24 24">
        <path d="M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"/>
      </svg>
    </div>
  </div>
</section>
